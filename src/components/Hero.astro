---
import Button from './Button.astro';
import { Image } from 'astro:assets';
import julianRede from '../assets/julian-rede.jpg';
---

<section class="relative bg-sand overflow-hidden">
  <div class="max-w-7xl mx-auto">
    <div class="grid lg:grid-cols-2 min-h-[calc(100vh-5rem)]">
      <!-- Text Content -->
      <div class="flex flex-col justify-center px-6 py-12 lg:py-20 lg:px-12 order-2 lg:order-1">
        <h1 class="text-4xl sm:text-5xl lg:text-6xl xl:text-7xl text-primary mb-6 leading-none">
          Straubing<br />kann mehr.
        </h1>
        <p class="text-lg lg:text-xl text-gray max-w-lg mb-4 leading-relaxed">
          Ich bin hier aufgewachsen. Ich habe hier mein Unternehmen aufgebaut.
          Und ich sehe jeden Tag, was möglich wäre – <strong class="text-dark">wenn wir es nur anpacken.</strong>
        </p>
        <p class="text-base text-primary font-headline uppercase tracking-wide mb-4">
          Bereit für den Wandel. Bereit für 2026.
        </p>

        <!-- Countdown zur Kommunalwahl -->
        <div class="mb-8 p-4 bg-white/80 backdrop-blur-sm inline-block">
          <p class="text-sm text-gray mb-1">Kommunalwahl Bayern</p>
          <p class="text-2xl font-headline text-primary" id="countdown">
            <span id="countdown-days">---</span> Tage
          </p>
        </div>

        <script>
          const wahltermin = new Date('2026-03-14T00:00:00');
          const heute = new Date();
          const diff = wahltermin.getTime() - heute.getTime();
          const tage = Math.ceil(diff / (1000 * 60 * 60 * 24));
          const el = document.getElementById('countdown-days');
          if (el && tage > 0) el.textContent = tage.toString();
        </script>
        <div class="flex flex-wrap gap-4">
          <Button href="#themen" variant="primary">
            Meine Versprechen
          </Button>
          <Button href="#ueber-mich" variant="outline">
            Wer ich bin
          </Button>
        </div>
      </div>

      <!-- Image with Mutig-Winkel -->
      <div class="relative order-1 lg:order-2 h-72 sm:h-80 lg:h-auto">
        <!-- Diagonal clip-path for the "Mutig-Winkel" effect -->
        <div class="absolute inset-0 lg:clip-path-angle">
          <Image
            src={julianRede}
            alt="Julian Guggeis bei einer SPD-Veranstaltung"
            widths={[400, 800, 1200]}
            sizes="(max-width: 1024px) 100vw, 50vw"
            class="w-full h-full object-cover"
            loading="eager"
            decoding="async"
          />
          <!-- Overlay gradient -->
          <div class="absolute inset-0 bg-gradient-to-t from-sand/30 via-transparent to-transparent lg:bg-gradient-to-l"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Angled bottom edge -->
  <div class="absolute bottom-0 left-0 right-0 h-16 bg-white transform -skew-y-2 origin-bottom-left translate-y-8"></div>
</section>

<style>
  @media (min-width: 1024px) {
    .lg\:clip-path-angle {
      clip-path: polygon(15% 0, 100% 0, 100% 100%, 0 100%);
    }
  }
</style>
